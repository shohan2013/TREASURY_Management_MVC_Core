@{
    Layout = "";
}

<link href="~/assets/libs/jsvectormap/css/jsvectormap.min.css" rel="stylesheet" type="text/css" />

<!-- Bootstrap Css -->
<link href="~/assets/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css" />

<!-- Icons Css -->
<link href="~/assets/css/icons.min.css" rel="stylesheet" type="text/css" />
<!-- App Css-->
<link href="~/assets/css/app.min.css" id="app-style" rel="stylesheet" type="text/css" />
<link href="~/customcss/common.css" rel="stylesheet" />

@*<script src="~/js/angular.min.js"></script>*@
<script src="~/js/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.9/angular.min.js"></script>



<link href="~/assets/css/app.min.css" id="app-style" rel="stylesheet" type="text/css" />

<link href="~/assets/css/notify.css" rel="stylesheet" />
<link href="~/assets/css/notify.min.css" rel="stylesheet" />

<style>
    body {
        height: 100vh;
        /* background-image: url("assets/images/import.jpg"); */
        background-image: url('@Url.Content("~/assets/images/treasury.jpg")');
        background-position: center;
        background-size: cover;
        background-repeat: no-repeat;
    }

</style>

<script type="text/javascript">
    var app = angular.module('App', [])
    app.controller('Ctl', function ($scope, $http, $window) {
        $scope.preventBack = function () {
            history.pushState(null, null, document.URL);
            window.addEventListener('popstate', function () {
                history.pushState(null, null, document.URL);
            });
        }

        $scope.Login = function () {
            $scope.loading = true;
            var isAllValid = true;
            if ($("#username").val() == "") {
                isAllValid = false;
                $("#username").siblings('span.error').css('visibility', 'visible');
            }
            else {
                $("#username").siblings('span.error').css('visibility', 'hidden');
            }

            if ($("#password-input").val() == "") {
                isAllValid = false;
                $("#password-input").siblings('span.error').css('visibility', 'visible');
            }
            else {
                $("#password-input").siblings('span.error').css('visibility', 'hidden');
            }

            if (isAllValid) {
                var post = $http({
                    method: "POST",
                    url: "/Login/Login",
                    dataType: 'json',
                    params: { username: $("#username").val(), password: $("#password-input").val() },
                    headers: { "Content-Type": "application/json" }
                });

                post.success(function (data) {

                    if (data.length > 0) {
                        localStorage.setItem("Name", "Smith");
                        var url = '@Url.Action("Index", "InterestCalculation")';
                        window.location.href = url;
                        $scope.loading = false;
                    }
                    else {
                        notify('error', 'Authentication', 'Invalid UseraName or Password');
                        $scope.loading = false;
                    }
                });

                post.error(function (data, status) {
                    notify('error', 'Authentication', 'Invalid UseraName or Password');
                    $scope.loading = false;
                });
            }
        }

        $scope.ShowHide = function () {
            var x = document.getElementById("password-input");
            if (x.type === "password") {
                x.type = "text";
            } else {
                x.type = "password";
            }
        }
    });
</script>


<body>
    <div class="authentication-bg min-vh-100" ng-app="App" ng-controller="Ctl">
        <div class="bg-overlay bg-light" style="opacity:0.1"></div>
        <div class="container">
            <div class="d-flex flex-column min-vh-100 px-3 pt-4">
                <div class="row justify-content-center my-auto">
                    <div class="col-md-8 col-lg-6 col-xl-5">

                        <div class="mb-4 pb-2">
                            <a href="index.html" class="d-block auth-logo">
                                <img src="~/assets/images/brand/logo.png" alt="" height="40" class="auth-logo-dark me-start" />
                                @*<img src="assets/images/logo-dark.png" alt="" height="30" class="auth-logo-dark me-start">*@
                                @*<img src="assets/images/logo-light.png" alt="" height="30" class="auth-logo-light me-start">*@
                            </a>
                        </div>

                        <div class="card">
                            <div class="card-body p-4">
                                <div class="text-center mt-2">
                                    <p style="font-weight:bolder;text-transform:uppercase;color:sandybrown">Sign in to continue to AkijBashir Treasury.</p>
                                </div>
                                <div class="p-2 mt-4">
                                    <form>

                                        <div class="mb-3">
                                            <label class="form-label" for="username">User Name</label>
                                            <div class="position-relative input-custom-icon">
                                                <input type="text" class="form-control" id="username" placeholder="Enter username">
                                                <span class="bx bx-user"></span>
                                                <span style="margin-top:32px;color:red;" class="error">User Name Required.</span>
                                            </div>

                                        </div>

                                        <div class="mb-3">
                                            <div class="float-end">
                                                <a href="auth-recoverpw.html" class="text-muted text-decoration-underline">Forgot password?</a>
                                            </div>
                                            <label class="form-label" for="password-input">Password</label>
                                            <div class="position-relative auth-pass-inputgroup input-custom-icon">
                                                <span class="bx bx-lock-alt"></span>
                                                <input type="password" class="form-control" id="password-input" placeholder="Enter password">
                                                <span style="margin-top:33px;color:red;" class="error">Password Required.</span>
                                                <button type="button" class="btn btn-link position-absolute h-100 end-0 top-0" id="password-addon" ng-click="ShowHide()">
                                                    <i class="mdi mdi-eye-outline font-size-18 text-muted"></i>
                                                </button>
                                            </div>
                                        </div>

                                        @*<div class="form-check py-1">
                                        <input type="checkbox" class="form-check-input" id="auth-remember-check">
                                        <label class="form-check-label" for="auth-remember-check">Remember me</label>
                                        </div>*@
                                        <br />
                                        <div class="mt-3">
                                            <button class="btn btn-primary w-100 waves-effect waves-light" style="font-weight:bolder" ng-click="Login()">Log In</button>
                                        </div>

                                        <div ng-show="loading">
                                                    <img style="width:80%;height:12px;position:absolute;z-index:1;margin-top:8px;" src="~/assets/images/Untitled.svg">
                                                </div>

                                        <div class="mt-4 text-center">
                                            <div class="signin-other-title">
                                                <h5 class="font-size-14 mb-3 mt-2 title"> Sign in with </h5>
                                            </div>

                                            <ul class="list-inline mt-2">
                                                <li class="list-inline-item">
                                                    <a href="javascript:void()" class="social-list-item bg-primary text-white border-primary">
                                                        <i class="bx bxl-facebook"></i>
                                                    </a>
                                                </li>
                                                <li class="list-inline-item">
                                                    <a href="javascript:void()" class="social-list-item bg-info text-white border-info">
                                                        <i class="bx bxl-linkedin"></i>
                                                    </a>
                                                </li>
                                                <li class="list-inline-item">
                                                    <a href="javascript:void()" class="social-list-item bg-danger text-white border-danger">
                                                        <i class="bx bxl-google"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>

                                        <div class="mt-4 text-center">
                                            <p class="mb-0">Don't have an account ? <a href="auth-register.html" class="fw-medium text-primary"> Signup now </a> </p>
                                        </div>
                                    </form>
                                </div>

                            </div>
                        </div>

                    </div><!-- end col -->
                </div><!-- end row -->

                <div class="row">
                    <div class="col-lg-12">
                        <div class="text-center p-4">
                            <p>© <script>document.write(new Date().getFullYear())</script> AkijBashir Group</p>
                        </div>
                    </div>
                </div>

            </div>
        </div><!-- end container -->
    </div>
</body>

<script src="~/assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="~/assets/libs/metismenujs/metismenujs.min.js"></script>


<script src="~/assets/js/pages/notify.js"></script>
<script src="~/assets/js/pages/notify.min.js"></script>
